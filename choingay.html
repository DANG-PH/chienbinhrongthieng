<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chiến Binh Rồng Thiêng</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="images/icongame1.png" type="image/png" />
  <style>
    #toast {
    position: fixed;
    opacity:0;
    bottom:66%;
    left: 50%;
    transform: translateX(-50%);
    background: #9e9e9e;
    box-shadow: 0 4px 12px rgba(0,0,0,0.7);
    color: black;
    padding: 8px 20px;
    border-radius: 8px;
    font-size: 14px;
    z-index: 9999;
    transition: opacity 0.5s ease, transform 0.5s ease;
    }
    body.dark-mode #toast {
    background: rgba(0, 0, 0, 0.8);
    box-shadow: 0 4px 12px rgba(255,255,255,0.2);
    color: #fff;
    }
    #toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
    }
    #toast.hidden {
    opacity: 0;
    pointer-events: none;
    }
    .login-button.hidden{
      display:none;
    }
    @media (max-width: 768px){
      #main-title{
        font-size: 22px;
      }
      #toast{
        font-size: 11px;
        bottom:72.5%;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div style="overflow: hidden;">
      <video autoplay muted loop playsinline class="header-video" style="animation: vid1 10s infinite;">
        <source src="images/choingay1.mp4" type="video/mp4">
      </video>
      <video autoplay muted loop playsinline class="header-video" style="animation: vid2 10s infinite;height:145%">
        <source src="images/choingay2.mp4" type="video/mp4">
      </video>
    </div>
    <div class="overlay"></div>
        <div class="header-content" >
            <h1 id="main-title"> Bắt Đầu Cuộc Chiến!</h1>
            <div>
                <ul>
                <li><a href="index.html">Trang chủ</a></li>
                <li><a href="gioithieu.html">Giới thiệu</a></li>
                <li><a href="nhanvat.html">Nhân Vật</a></li>
                <li><a href="diendan.html">Diễn đàn</a></li>
                <li><a href="https://www.facebook.com/people/Chi%E1%BA%BFn-Binh-R%E1%BB%93ng-Thi%C3%AAng/61576541835732/" target="_blank">Fanpage</a></li>
                <li><a href="tintuc.html">Tin tức</a></li>
                <li><a href="huongdanchoi.html">Hướng dẫn chơi</a></li>
                <li><a href="choingay.html" id="selected">Chơi ngay</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="bg-content1"style="padding-top: 1px;">
        <div style="float:right;margin-top:5px">
            <label class="switch" style="margin-top:20px;margin-right: -17px;">
                <input type="checkbox" id="darkModeToggle">
                <span class="slider round"></span>
            </label>
        </div>
        <div style="text-align: center;margin-top:45px">
          <button id="login-btn" class="login-button hidden">Đăng nhập ngay</button>
        </div>
        <div id="game-container"></div>
        <div class="download-buttons" style="text-align: center;">
          <h3><i><b>Sức mạnh đang trỗi dậy! Chọn nền tảng, bước vào trận chiến tối thượng!</b></i></h3>
          <p><i>Không còn đường lui... Nếu ngươi là chiến binh thực thụ, thì đây là lúc bùng nổ sức mạnh!</i></p>
          <a href="gctcn.html"><button>JAVA</button></a>
          <a href="gctcn.html"><button>ANDROID (APK)</button></a>
          <a href="gctcn.html"><button>ANDROID (Google Play)</button></a>
          <a href="gctkn.html"><button>PC</button></a>
          <a href="choingay.html"><button>IPHONE</button></a>
        </div> 
    </div>
    <audio id="bg-music" autoplay loop>
        <source src="sounds/op1.mp3" type="audio/mpeg">
        Trình duyệt của bạn không hỗ trợ âm thanh.
    </audio>
    <footer>
        <p style="font-style: italic;"><strong>© 2025 Chiến Binh Rồng Thiêng | Phạm Hải Đăng</strong></p>
    </footer>
    <div id="toast"></div>
    <script>
        const toggle = document.getElementById("darkModeToggle");

        // Khi tải trang: kiểm tra trạng thái dark mode đã lưu
        if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark-mode");
        toggle.checked = true;
        }

        // Khi người dùng bật/tắt dark mode
        toggle.addEventListener("change", function () {
        const isDark = toggle.checked;
        document.body.classList.toggle("dark-mode", isDark);
        localStorage.setItem("darkMode", isDark);
        });
        //audio 
        const bgMusic = document.getElementById("bg-music");
        bgMusic.volume = 0.2; // âm lượng nhỏ (20%)
        const loginBtn = document.getElementById("login-btn");
        const loggedInUser = sessionStorage.getItem("currentUser");
        const container = document.getElementById("game-container");
        const mainTitle = document.getElementById("main-title");
        if (!loggedInUser) {
            mainTitle.textContent = "“Chiến Trường Rồng Thiêng Đang Gọi!”";
            showToast("⚠️ Chiến Binh! Đăng nhập là bước đầu tiên để khai phóng sức mạnh và bước vào cuộc chiến định mệnh!");
            loginBtn.classList.remove("hidden");
            loginBtn.addEventListener("click", function () {
              window.location.href = "dangnhap.html";
            });
            // setTimeout(() => {
            //     window.location.href = "dangnhap.html";
            // }, 5000); // chờ 3s để toast hiển thị xong
            window.onload = function () {
            const downloadLinks = document.querySelectorAll(".download-buttons a");
            downloadLinks.forEach(link => {
              if (!isLoggedIn) {
                link.href = "dangnhap.html"; // nếu chưa đăng nhập thì ép link về đăng nhập
              }});
        }} else {
            container.innerHTML = `<iframe src="gktkn.html" style="width:100%; aspect-ratio: 2 / 1; border:none"></iframe>`;
        }
        
        function showToast(message) {
          const toast = document.getElementById("toast");
          if (!toast) return;
          toast.textContent = message;
          toast.classList.add("show");
          toast.classList.remove("hidden");
          setTimeout(() => {
              toast.classList.remove("show");
              toast.classList.add("hidden");
          }, 5000);
      }
    </script>
</body>
</html>