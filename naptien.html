<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chi·∫øn Binh R·ªìng Thi√™ng</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="images/icongame1.png" type="image/png" />
  <style>
    #xac-nhan-popup{
      width: 700px;
      position: fixed;
      display:none;
      top:50%;left:50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      border-radius: 12px;
      text-align: center;
      padding:20px;
      z-index: 9999;
      animation: fadeIn 0.3s ease-out;
      box-shadow: 0 0 38px rgba(0, 0, 0, 0.9);
    }

    #xac-nhan-popup button:hover {
      transform: scale(1.02);
      transition:0.2s ;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translate(-50%, -60%); }
      to { opacity: 1; transform: translate(-50%, -50%); }
    }
    body.dark-mode #xac-nhan-popup{
      background-color: #222;
    }
    .vip {
      margin: 0px !important;
    }
    .vip strong{
      color:	#1976d2;
    }
    body.dark-mode .vip strong{
      color:	#ffa500;
    }
    .goi-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    .goi-nap {
      border: 2px solid #ccc;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.5);
    }
    .goi-nap:hover{
        transform: translateY(-5px);
        box-shadow: 0px 4px 8px rgba(0,0,0,0.8);
        transition: .4s;
    }
    body.dark-mode .goi-nap:hover{
        box-shadow: 0px 0px 38px rgba(255,165,0,0.3);
    }
    .goi-nap img {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }

    .goi-noidung {
      font-size: 14px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding:10px
    }
    .goi-noidung p{
      margin:0
    }

    .nut-tang {
      margin-top: 0px;
      border: none;
      display:flex;
      align-items: center;
      justify-content: center;
      height: 30px;
      width: 30px;
      border-radius: 100%;
      font-size:11px;
      padding:0;
    }

    #tong-nap {
      font-weight: bold;
      margin-top: 20px;
    }

    #qr-anh {
      width: 200px;
      margin: auto;
      display: block;
    }
    details summary{
        font-size: 20px;
        font-weight: bold;
    }
    details {
        box-shadow: 0px 0px 50px rgba(0,0,0,0.2);
        padding:10px;
        border-left:4px solid #555;
        margin-top:15px;
    }
    body.dark-mode details{
        border-left-color:#ffa500;
    }
    #toast {
    position: fixed;
    opacity: 0;
    bottom: 60%;
    left: 50%;
    transform: translateX(-50%);
    background: #9e9e9e;
    box-shadow: 0 4px 12px rgba(0,0,0,0.7);
    color: black;
    padding: 8px 20px;
    border-radius: 8px;
    font-size: 14px;
    z-index: 9999;
    transition: opacity 0.5s ease, transform 0.5s ease;
    }

    body.dark-mode #toast {
    background: rgba(0, 0, 0, 0.8);
    box-shadow: 0 4px 12px rgba(255,255,255,0.2);
    color: #fff;
    }

    #toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
    }

    #toast.hidden {
    opacity: 0;
    pointer-events: none;
    }
    @media (max-width: 600px) {
      .bg-content{
        padding:25px
      }
      .goi-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .goi-nap {
        height:150px;
      }
      .goi-noidung{
        padding:3px;
      }
      .nut-tang{
        font-size: 9px !important;
        width: 20px;height:20px;
      }
      .goi-nap img{
        height:110px
      }
      .goi-nap p{
        font-size:8px;
      }
      details summary{
        font-size: 12px;
      }
      table {
        font-size: 11px;
      }
      button{
        font-size: 9px;
        padding:8px 12px
      }
      #nut-dang-nhap{
        font-size: 9px;
      }
      #xac-nhan-popup{
        width: 400px;
      }
      #xac-nhan-popup img{
        width: 140px !important;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div style="overflow: hidden;">
      <video autoplay muted loop playsinline preload="metadata" poster="images/gioithieu.webp" class="header-video" style="animation: vid1 10s infinite;;filter: brightness(0.9)">
        <source src="images/gioithieu.webm" type="video/webm">
        <source src="images/gioithieu.mp4" type="video/mp4">
      </video>
      <video autoplay muted loop playsinline preload="metadata" poster="images/gioithieu2.webp" class="header-video" style="animation: vid2 10s infinite;height:120%;filter: brightness(0.9)">
        <source src="images/gioithieu2.webm" type="video/webm">
        <source src="images/gioithieu2.mp4" type="video/mp4">
      </video>
    </div>
    <div class="overlay"></div>
        <div class="header-content" >
            <h1>Kho B√°u Zeni ƒêang Ch·ªù!</h1>
            <div>
                <ul>
                <li><a href="index.html">Trang ch·ªß</a></li>
                <li><a href="gioithieu.html">Gi·ªõi thi·ªáu</a></li>
                <li><a href="nhanvat.html">Nh√¢n V·∫≠t</a></li>
                <li><a href="diendan.html">Di·ªÖn ƒë√†n</a></li>
                <li><a href="https://www.facebook.com/people/Chi%E1%BA%BFn-Binh-R%E1%BB%93ng-Thi%C3%AAng/61576541835732/" target="_blank">Fanpage</a></li>
                <li><a href="tintuc.html">Tin t·ª©c</a></li>
                <li><a href="huongdanchoi.html">H∆∞·ªõng d·∫´n ch∆°i</a></li>
                <li><a href="choingay.html">Ch∆°i ngay</a></li>
                <li><a href="naptien.html" id="selected">N·∫°p game</a></li>
                <li><a href="shop.html">Shop r·ªìng thi√™ng</a></li>
                <li><a href="chatbot.html">Chat bot h·ªó tr·ª£</a></li>
                <li><a href="profile.html">Profile</a></li>
                <li><a href="vinhdanh.html">Vinh danh chi·∫øn binh</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="bg-content1">
        <div style="float:right;margin-top:5px">
            <label class="switch">
                <input type="checkbox" id="darkModeToggle">
                <span class="slider round"></span>
            </label>
        </div>
        <h2>Ch√†o m·ª´ng chi·∫øn binh ƒë·∫øn v·ªõi c·ªïng n·∫°p Zeni R·ªìng Thi√™ng!</h2>
        <p><i><b>Gia tƒÉng s·ª©c m·∫°nh, m·ªü kh√≥a k·ªπ nƒÉng t·ªëi th∆∞·ª£ng v√† s·∫µn s√†ng cho nh·ªØng tr·∫≠n chi·∫øn long tr·ªùi l·ªü ƒë·∫•t! M·ªói Zeni b·∫°n n·∫°p ch√≠nh l√† b∆∞·ªõc ti·∫øn g·∫ßn h∆°n ƒë·∫øn vinh quang b·∫•t di·ªát!</b></i></p>
    </div>
    <div class="bg-content">
        <h2>N·∫°p Zeni</h2>
        <p>Xin ch√†o chi·∫øn binh: <span id="ten-nguoi-choi"></span></p>
        <p>S·ªë Zeni hi·ªán t·∫°i: <span id="kc-hientai">0</span></p>
        <div class="download-buttons" style="display:flex;justify-content: space-between;align-items: center;margin-top:-17px">
          <p class="vip">C·∫•p b·∫≠c chi·∫øn binh: <strong id="cap-bac"><span>VIP 0</span></strong></p>
          <button id="nut-dang-nhap" style="margin-bottom:12px;margin-top:0px;padding:5px 8px">ƒêƒÉng nh·∫≠p</button>
        </div>
        <div class="goi-grid">
            <div class="goi-nap" data-value="10000">
                <img src="images/50k.png" alt="10k">
                <div class="goi-noidung">
                <p>50.000 VNƒê ‚Üí 250 Zeni</p>
                <button class="nut-tang" onclick="themGoi(50000)">+</button>
                </div>
            </div>
            <div class="goi-nap" data-value="20000">
                <img src="images/100k.png" alt="20k">
                <div class="goi-noidung">
                <p>100.000 VNƒê ‚Üí 500 Zeni</p>
                <button class="nut-tang" onclick="themGoi(100000)">+</button>
                </div>
            </div>
            <div class="goi-nap" data-value="50000">
                <img src="images/200k.png" alt="50k">
                <div class="goi-noidung">
                <p>200.000 VNƒê ‚Üí 1050 Zeni</p>
                <button class="nut-tang" onclick="themGoi(200000)">+</button>
                </div>
            </div>
            <div class="goi-nap" data-value="100000">
                <img src="images/300k.png" alt="100k">
                <div class="goi-noidung">
                <p>500.000 VNƒê ‚Üí 2825 Zeni</p>
                <button class="nut-tang" onclick="themGoi(500000)">+</button>
                </div>
            </div>
            <div class="goi-nap" data-value="200000">
                <img src="images/400k.png" alt="200k">
                <div class="goi-noidung">
                <p>888.888 VNƒê ‚Üí 5825 Zeni</p>
                <button class="nut-tang" onclick="themGoi(888888)">+</button>
                </div>
            </div>
            <div class="goi-nap" data-value="500000">
                <img src="images/400k.png" alt="500k">
                <div class="goi-noidung">
                <p>1.000.000 VNƒê ‚Üí 5825 Zeni</p>
                <button class="nut-tang" onclick="themGoi(1000000)">+</button>
                </div>
            </div>
        </div>

        <p id="tong-nap">T·ªïng ti·ªÅn: 0 VNƒê | T·ªïng Zeni: 0</p>
        <button class="download-buttons" onclick="napTien()">N·∫°p Ti·ªÅn</button>
        <details>
            <summary>QR donate</summary>
            <img id="qr-anh" src="images/qr.jpg" alt="QR Code">
        </details>

        <h2>L·ªãch s·ª≠ n·∫°p Zeni</h2>
        <table border="1" style="width:100%;text-align:center">
        <thead>
            <tr>
            <th>Th·ªùi gian</th>
            <th>S·ªë Zeni</th>
            <th>S·ªë ti·ªÅn (VNƒê)</th>
            </tr>
        </thead>
        <tbody id="lich-su-nap"></tbody>
        </table>
    </div>
    <audio id="bg-music" autoplay loop>
        <source src="sounds/phepmau.mp3" type="audio/mpeg">
        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ √¢m thanh.
    </audio>
    <button id="toggle-music" class="music-toggle-btn">üîá</button>
    <footer>
        <p style="font-style: italic;"><strong>¬© 2025 Chi·∫øn Binh R·ªìng Thi√™ng | Ph·∫°m H·∫£i ƒêƒÉng</strong></p>
    </footer>

    <div id="overlay-online" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:1000;"></div>
    <div id="xac-nhan-popup">
      <h3>X√°c nh·∫≠n chuy·ªÉn kho·∫£n</h3>
      <p>Vui l√≤ng chuy·ªÉn kho·∫£n ƒë·∫øn QR b√™n d∆∞·ªõi. Sau khi chuy·ªÉn xong, h√£y b·∫•m "T√¥i ƒë√£ chuy·ªÉn kho·∫£n".</p>
      <img src="images/qr.jpg" alt="QR Code" style="width:200px; margin: 10px 0;">
      <br>
      <button onclick="xacNhanChuyenKhoan()" style="margin-top:10px">‚úÖ T√¥i ƒë√£ chuy·ªÉn kho·∫£n</button><br>
      <button onclick="dongPopup()" style="margin-top:10px;color:red">‚úñ ƒê√≥ng</button>
    </div>
    <div id="toast"></div>
    <script src="darkmode.js"></script>
    <script src="phatnhac.js"></script>
    <script src="thongbao.js"></script>
    <script>
        //nap
        const user = JSON.parse(sessionStorage.getItem("currentUser"));
        let tongTien = 0;
        let tongKC = 0;
        const nutDangNhap = document.getElementById("nut-dang-nhap");
        if (!user) {
          document.getElementById("ten-nguoi-choi").textContent = "Ch∆∞a ƒëƒÉng nh·∫≠p";
          document.getElementById("kc-hientai").textContent = "0";
          nutDangNhap.textContent = "ƒêƒÉng nh·∫≠p";
          nutDangNhap.onclick = () => {
            window.location.href = "dangnhap.html";
          };
        } else {
            users = JSON.parse(localStorage.getItem("users")) || [];
            userr = users.find(u => u.email === user.email);
            document.getElementById("ten-nguoi-choi").textContent = user.username;
            document.getElementById("kc-hientai").textContent = userr.kimcuong || 0;
            nutDangNhap.textContent = "ƒêƒÉng xu·∫•t";
            nutDangNhap.onclick = logout;
            const lichSuNap = userr.history || [];
            let tongZeniDaNap = 0;

            // Hi·ªÉn th·ªã l·ªãch s·ª≠
            const tbody = document.getElementById("lich-su-nap");
            if (tbody) {
            tbody.innerHTML = lichSuNap.map(log => {
                tongZeniDaNap += log.zeni;
                const thoiGian = new Date(log.time).toLocaleString("vi-VN", {
                  timeZone: "Asia/Ho_Chi_Minh"
                });
                return `<tr>
                <td>${thoiGian}</td>
                <td>${log.zeni}</td>
                <td>${log.vnd.toLocaleString()}</td>
                </tr>`;
            }).join('');
            }
            // G·∫Øn c·∫•p b·∫≠c v√†o giao di·ªán
            const capBac = document.getElementById("cap-bac");
            if (capBac) {
            capBac.textContent = getCapBac(tongZeniDaNap);
            }
        }
        function themGoi(soTien) {
        tongTien += soTien;
        switch (soTien){
            case 50000:tongKC+=250; break
            case 100000:tongKC+=500; break
            case 200000:tongKC+=1050; break
            case 500000:tongKC+=2825; break
            case 888888:tongKC+=5825; break
            case 1000000:tongKC+=5825; break
        }
        document.getElementById("tong-nap").textContent = `T·ªïng ti·ªÅn: ${tongTien.toLocaleString()} VNƒê | T·ªïng Zeni: ${tongKC}`;
        }
      
        function napTien() {
          if (!user) {
            alert("B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ n·∫°p ti·ªÅn!");
            window.location.href = "dangnhap.html";
            return;
          }
          if (tongTien === 0) {
            showToast("‚ö†Ô∏è B·∫°n ch∆∞a ch·ªçn g√≥i n·∫°p n√†o.");
            return;
          }
          document.getElementById("overlay-online").style.display= "block"
          document.getElementById("xac-nhan-popup").style.display = "block";
        }
        function dongPopup() {
          document.getElementById("overlay-online").style.display= "none"
          document.getElementById("xac-nhan-popup").style.display = "none";
        }

        function xacNhanChuyenKhoan() {
          dongPopup();
          showToast("‚è≥ ƒêang x√°c nh·∫≠n giao d·ªãch...");

          setTimeout(() => {
              userr.kimcuong = (userr.kimcuong || 0) + tongKC;
              userr.history = userr.history || [];
              userr.history.push({
                time: new Date().toISOString(),
                zeni: tongKC,
                vnd: tongTien
              });
              localStorage.setItem("users", JSON.stringify(users));
              document.getElementById("kc-hientai").textContent = userr.kimcuong;
              showToast(`‚úÖ N·∫°p th√†nh c√¥ng ${tongKC} Zeni!`);
              tongTien = 0;
              tongKC = 0;
              document.getElementById("tong-nap").textContent = `T·ªïng ti·ªÅn: 0 VNƒê | T·ªïng Zeni: 0`;

              // C·∫≠p nh·∫≠t l·ªãch s·ª≠
              let tongZeniDaNap = 0;
              const tbody = document.getElementById("lich-su-nap");
              tbody.innerHTML = userr.history.map(log => {
                tongZeniDaNap += log.zeni;
                const thoiGian = new Date(log.time).toLocaleString("vi-VN", {
                  timeZone: "Asia/Ho_Chi_Minh"
                });
                return `<tr>
                    <td>${thoiGian}</td>
                    <td>${log.zeni}</td>
                    <td>${log.vnd.toLocaleString()}</td>
                  </tr>`;
              }).join('');

              // C·∫≠p nh·∫≠t c·∫•p b·∫≠c
              const capBac = document.getElementById("cap-bac");
              if (capBac) {
                capBac.textContent = getCapBac(tongZeniDaNap);
              }
            }, 3000);
        }

        // X√°c ƒë·ªãnh c·∫•p b·∫≠c
        function getCapBac(tong) {
        if (tong < 1000) return "VIP 0";
        if (tong < 5000) return "VIP 1";
        if (tong < 10000) return "VIP 2";
        if (tong < 20000) return "VIP 3";
        if (tong < 50000) return "VIP 4";
        if (tong < 100000) return "VIP 5";
        if (tong < 200000) return "VIP 6";
        if (tong < 300000) return "VIP 7";
        if (tong < 500000) return "VIP 8";
        if (tong >= 500000) return "üëë Huy·ªÅn Tho·∫°i R·ªìng Thi√™ng";
        }
        function logout() {
        sessionStorage.removeItem("currentUser");
        showToast("‚úÖ ƒêƒÉng xu·∫•t th√†nh c√¥ng!");
        setTimeout(() => location.reload(), 1000); // T·∫£i l·∫°i trang ƒë·ªÉ quay v·ªÅ ch·∫ø ƒë·ªô ch∆∞a ƒëƒÉng nh·∫≠p
      }
    </script>
</body>
</html>