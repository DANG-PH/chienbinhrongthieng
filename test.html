<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
        <!-- Đăng ký -->
    <input id="reg-user" placeholder="Tên đăng ký">
    <input id="reg-pass" placeholder="Mật khẩu">
    <button onclick="register(
        document.getElementById('reg-user').value,
        document.getElementById('reg-pass').value)">Đăng ký</button>

    <!-- Đăng nhập -->
    <input id="login-user" placeholder="Tên đăng nhập">
    <input id="login-pass" placeholder="Mật khẩu">
    <button onclick="login(
        document.getElementById('login-user').value,
        document.getElementById('login-pass').value)">Đăng nhập</button>

    <!-- Đổi mật khẩu -->
    <input id="old-pass" placeholder="Mật khẩu cũ">
    <input id="new-pass" placeholder="Mật khẩu mới">
    <button onclick="changePassword(
        document.getElementById('old-pass').value,
        document.getElementById('new-pass').value)">Đổi mật khẩu</button>
    <script>
        function register(username, password) {
            const user = { username, password };
            localStorage.setItem("user", JSON.stringify(user));
            alert("Đăng ký thành công!");
        }
        function login(username, password) {
            const storedUser = JSON.parse(localStorage.getItem("user"));
            if (!storedUser) {
                alert("Chưa có tài khoản nào. Vui lòng đăng ký trước.");
                return;
            }

            if (storedUser.username === username && storedUser.password === password) {
                alert("Đăng nhập thành công!");
            } else {
                alert("Sai tài khoản hoặc mật khẩu.");
            }
        }
        function changePassword(oldPass, newPass) {
        const storedUser = JSON.parse(localStorage.getItem("user"));

        if (!storedUser) {
            alert("Chưa có tài khoản.");
            return;
        }

        if (storedUser.password === oldPass) {
            storedUser.password = newPass;
            localStorage.setItem("user", JSON.stringify(storedUser));
            alert("Đổi mật khẩu thành công!");
        } else {
            alert("Sai mật khẩu cũ.");
        }
    }

    </script>
</body>
</html>